{"ast":null,"code":"import _regeneratorRuntime from\"/Users/new/bootcamp/FootWearhouse/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/new/bootcamp/FootWearhouse/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/new/bootcamp/FootWearhouse/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/new/bootcamp/FootWearhouse/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/new/bootcamp/FootWearhouse/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Button,Modal}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormData={email:\"\",password:\"\"};var LogIn=function LogIn(_ref){var show=_ref.show,handleClose=_ref.handleClose;var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){return setFormData(function(currentFormData){return _objectSpread(_objectSpread({},currentFormData),{},_defineProperty({},e.target.name,e.target.value));});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",fetch(\"/login\",{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(resp){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(resp.status===400)){_context.next=7;break;}_context.next=3;return resp.json();case 3:response=_context.sent;setError(response.message);_context.next=9;break;case 7:localStorage.setItem(\"userId\",resp.user.id);navigate(\"/shoes\");case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(function(err){return console.log(err);}));case 1:case\"end\":return _context2.stop();}},_callee2);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Log In\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",className:\"m-3\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",className:\"m-3\",onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:error})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSubmit,children:\"Log In\"})]})]});};export default LogIn;","map":{"version":3,"names":["React","useState","Button","Modal","useNavigate","jsx","_jsx","jsxs","_jsxs","initialFormData","email","password","LogIn","_ref","show","handleClose","_useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","error","setError","navigate","handleChange","e","currentFormData","_objectSpread","_defineProperty","target","name","value","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_callee2$","_context2","prev","next","abrupt","fetch","method","headers","body","JSON","stringify","then","_ref3","_callee","resp","response","_callee$","_context","status","json","sent","message","localStorage","setItem","user","id","stop","_x","apply","arguments","catch","err","console","log","onHide","children","Header","closeButton","Title","Body","type","placeholder","className","onChange","Footer","variant","onClick"],"sources":["/Users/new/bootcamp/FootWearhouse/client/src/LogIn.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst initialFormData = {\n    email: \"\",\n    password: \"\"\n}\n\nconst LogIn = ({ show, handleClose }) => {\n    const [formData, setFormData] = useState(initialFormData);\n    const [error, setError] = useState(\"\");\n    const navigate = useNavigate();\n\n    const handleChange = e => {\n        return setFormData(currentFormData => ({\n            ...currentFormData,\n            [e.target.name]: e.target.value\n        }));\n    };\n\n    const handleSubmit = async () => {\n        return fetch(\"/login\", {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\",\n              },\n            body: JSON.stringify(formData),\n        })\n        .then(async resp => {\n            if (resp.status === 400) {\n                const response = await resp.json();\n                setError(response.message);\n            } else {\n                localStorage.setItem(\"userId\", resp.user.id);\n                navigate(\"/shoes\");\n            }\n        })\n        .catch(err => console.log(err))\n    };\n\n    return (\n        <Modal show={show} onHide={handleClose}>\n            <Modal.Header closeButton>\n            <Modal.Title>Log In</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <input type=\"text\" placeholder=\"username\" className=\"m-3\" onChange={handleChange} />\n                <br />\n                <input type=\"password\" placeholder=\"password\" className=\"m-3\" onChange={handleChange} />\n                <span className=\"text-danger\">{error}</span>\n            </Modal.Body>\n            <Modal.Footer>\n            <Button variant=\"secondary\" onClick={handleClose}>\n                Close\n            </Button>\n            <Button variant=\"primary\" onClick={handleSubmit}>\n                Log In\n            </Button>\n            </Modal.Footer>\n        </Modal>\n    )\n};\n\nexport default LogIn;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}